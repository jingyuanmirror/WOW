# 首页精选作品图片上传管理页 PRD

## 1. 目标与范围
- **目标**：提供一个独立管理页，用于上传、维护首页「精选作品」区块的图片与元数据，确保内容更新高效、可控、可预览。
- **范围**：仅覆盖首页精选作品的媒体与文案管理（主图、标签、标题、描述、排序、上下线）。不含支付、电商、权限体系的实现。

## 2. 角色与权限
- **管理员/编辑**：可上传、编辑、删除、排序、上下线图片；可批量操作；可预览发布效果。
- **访客/未授权用户**：无访问权限，进入时重定向到登录/403 页面（未来可接入 Supabase Auth）。

## 3. 入口与导航
- 暂定路由：`/admin/featured-uploads`
- 导航：顶部返回首页/仪表盘入口；面包屑显示当前位置。

## 4. 信息架构
1) **顶部区域**：标题 + 说明；"新增作品" 主按钮；全局操作（批量上下线、批量删除）。
2) **过滤与搜索**：按状态（已发布/草稿/下线）、品质标签、关键词搜索。
3) **数据表格/卡片视图切换**：默认表格，支持切换卡片模式预览。
4) **新增/编辑侧边抽屉**：右侧滑出，包含表单与即时预览。
5) **预览区**：模拟首页精选卡片样式实时渲染（图 + 标题 + 品质色条 + 描述）。

## 5. 数据模型（前端表单字段）
- `id`（生成）
- `title`（必填，1-60 字）
- `description`（选填，0-120 字）
- `quality`（必填，枚举：common/rare/epic/legendary，对应色）
- `tags`（多选，可选：最新/热门/免费/PvP/PvE）
- `priceType`（枚举：paid/free；paid 时需填 `price` 数值）
- `media`：
  - 主图（必填，1 张，推荐 1920x1080，WebP/JPEG/PNG，<2MB）
  - 备用图（选填，最多 3 张）
- `sortOrder`（数字，越大越靠前或可拖拽排序）
- `status`（枚举：draft/published/offline）
- `publishAt`（选填，预约上线时间）

## 6. 核心流程
### 6.1 新增作品
1) 点击「新增作品」→ 抽屉打开。
2) 上传主图（拖拽/点击选择），即时展示压缩/上传进度。
3) 填写标题、描述、品质、标签、价格类型。
4) 设置排序、状态（草稿/发布）、预约上线时间（可选）。
5) 预览区实时更新；提交后进入列表顶部，状态为草稿或已发布。

### 6.2 编辑/复制
- 列表行内点击「编辑」→ 抽屉；保存后更新记录。
- 「复制」按钮复制该条数据为草稿，便于快速创建相似卡片。

### 6.3 排序与上下线
- 表格左侧拖拽手柄调整顺序；松开即写入 `sortOrder`。
- 行内「上线/下线」切换；支持批量操作。

### 6.4 删除与恢复
- 行内删除/批量删除 → 二次确认；标记为软删除（状态 `deleted`），默认不显示，支持「显示已删除」过滤与恢复。

### 6.5 预览
- 右侧预览区模拟首页卡片样式；切换「桌面/移动」视图；显示品质色条、价格标签、CTA 占位。
- 提供「查看上线效果」跳转到首页（未来可接预发布环境参数）。

## 7. 交互与校验
- 上传：拖拽/点击；文件类型校验（jpeg/png/webp）；大小上限 2MB，超限提示；显示进度与可取消。
- 表单校验：必填项前端校验，错误高亮 + 文案提示。
- 状态切换：发布前需满足必填 + 至少一张主图；下线需确认。
- 排序：拖拽手柄；提供「重置排序」按钮（按更新时间倒序）。
- 批量：多选复选框；批量上线/下线/删除。

## 8. UI 设计要点
- 视觉：延续史诗暗色 + 品质色条；主操作采用金色强调。
- 布局：左列表右预览的两栏布局；移动端改为上下堆叠，抽屉全屏。
- 反馈：
  - 上传中显示进度条、可取消
  - 保存成功 `sonner`/toast 提示
  - 失败提示错误原因
- 空状态：展示插画 + "新增作品" CTA。
- 加载骨架：表格行 skeleton；预览卡骨架。

## 9. 技术实现建议（前端）
- **框架**：Next.js App Router（RSC 优先，表单/上传部分为客户端组件）。
- **UI**：shadcn/ui（Table、Drawer/Sheet、Tabs、Badge、Upload dropzone 可用自定义组件）。
- **状态**：React Hook Form 管理表单；Zod 校验；SWR 获取与提交（未来对接 API）。
- **上传**：前端先压缩/校验，调用后端上传接口或直传存储（未来接 Supabase Storage/S3）；本期可 Mock 接口返回 URL。
- **排序**：`@dnd-kit/sortable` 实现拖拽；保存后更新本地状态并调用 API。
- **预览**：使用现有卡片样式（参考 `src/components/featured-skins.tsx`）生成实时预览。

## 10. 数据与接口（占位）
- `GET /api/admin/featured`：列表，支持过滤/分页。
- `POST /api/admin/featured`：创建。
- `PUT /api/admin/featured/:id`：更新（含排序/状态）。
- `POST /api/admin/featured/:id/duplicate`：复制。
- `DELETE /api/admin/featured/:id`：软删除。
- 上传接口：`POST /api/upload` 返回文件 URL（后续对接真实存储）。

## 11. 验收标准
- 可创建、编辑、复制、删除、排序、上下线精选作品条目。
- 主图上传有校验与进度提示；必填项未填禁止发布。
- 预览区实时反映表单内容，支持桌面/移动切换。
- 批量操作可用并有确认提示。
- 无权限用户无法访问，或被重定向。

## 12. 待定/后续
- 权限与登录流程（接 Supabase Auth）。
- 真正的存储与 CDN 接入；图片压缩策略。
- 审核流（草稿→审核→发布）。
- 多语言与版本管理。
